{"version":3,"file":"note-settings.view.element-Bn3rxrq8.js","sources":["../../../Client/src/workspace/note/views/note-settings.view.element.ts"],"sourcesContent":["/**\r\n * Note Settings View Element\r\n *\r\n * Settings view for note metadata (tags, created/modified info).\r\n * This is a WorkspaceView that appears as a tab in the workspace.\r\n *\r\n * Skills used: umbraco-workspace (WorkspaceView), umbraco-umbraco-element\r\n */\r\n\r\nimport { NOTE_WORKSPACE_CONTEXT } from \"../note-workspace.context-token.js\";\r\nimport { css, html, customElement, state } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\r\n\r\n@customElement(\"notes-note-settings-view\")\r\nexport class NoteSettingsViewElement extends UmbLitElement {\r\n  #workspaceContext?: typeof NOTE_WORKSPACE_CONTEXT.TYPE;\r\n\r\n  @state()\r\n  private _tags: string[] = [];\r\n\r\n  @state()\r\n  private _newTag = \"\";\r\n\r\n  @state()\r\n  private _createdDate?: string;\r\n\r\n  @state()\r\n  private _modifiedDate?: string;\r\n\r\n  @state()\r\n  private _createdBy?: string;\r\n\r\n  @state()\r\n  private _modifiedBy?: string;\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.consumeContext(NOTE_WORKSPACE_CONTEXT, (instance) => {\r\n      this.#workspaceContext = instance;\r\n      this.#observeData();\r\n    });\r\n  }\r\n\r\n  #observeData() {\r\n    if (!this.#workspaceContext) return;\r\n\r\n    this.observe(this.#workspaceContext.tags, (tags) => {\r\n      this._tags = tags || [];\r\n    });\r\n\r\n    this.observe(this.#workspaceContext.createdDate, (date) => {\r\n      this._createdDate = date;\r\n    });\r\n\r\n    this.observe(this.#workspaceContext.modifiedDate, (date) => {\r\n      this._modifiedDate = date;\r\n    });\r\n\r\n    this.observe(this.#workspaceContext.createdBy, (user) => {\r\n      this._createdBy = user;\r\n    });\r\n\r\n    this.observe(this.#workspaceContext.modifiedBy, (user) => {\r\n      this._modifiedBy = user;\r\n    });\r\n  }\r\n\r\n  #formatDate(dateString?: string): string {\r\n    if (!dateString) return \"-\";\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString(undefined, {\r\n      year: \"numeric\",\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    });\r\n  }\r\n\r\n  #handleNewTagInput(e: InputEvent) {\r\n    const target = e.target as HTMLInputElement;\r\n    this._newTag = target.value;\r\n  }\r\n\r\n  #handleAddTag() {\r\n    if (this._newTag.trim()) {\r\n      this.#workspaceContext?.addTag(this._newTag.trim());\r\n      this._newTag = \"\";\r\n    }\r\n  }\r\n\r\n  #handleRemoveTag(tag: string) {\r\n    this.#workspaceContext?.removeTag(tag);\r\n  }\r\n\r\n  #handleKeyPress(e: KeyboardEvent) {\r\n    if (e.key === \"Enter\") {\r\n      this.#handleAddTag();\r\n    }\r\n  }\r\n\r\n  override render() {\r\n    return html`\r\n      <uui-box headline=\"Tags\">\r\n        <div class=\"tags-section\">\r\n          <div class=\"tag-input\">\r\n            <uui-input\r\n              placeholder=\"Add a tag...\"\r\n              .value=${this._newTag}\r\n              @input=${this.#handleNewTagInput}\r\n              @keypress=${this.#handleKeyPress}\r\n            ></uui-input>\r\n            <uui-button\r\n              look=\"primary\"\r\n              @click=${this.#handleAddTag}\r\n              label=\"Add Tag\"\r\n              .disabled=${!this._newTag.trim()}\r\n            >\r\n              Add\r\n            </uui-button>\r\n          </div>\r\n\r\n          <div class=\"tags-list\">\r\n            ${this._tags.length > 0\r\n              ? this._tags.map(\r\n                  (tag) => html`\r\n                    <span class=\"tag\">\r\n                      ${tag}\r\n                      <button\r\n                        class=\"tag-remove\"\r\n                        @click=${() => this.#handleRemoveTag(tag)}\r\n                        aria-label=\"Remove tag\"\r\n                      >\r\n                        <uui-icon name=\"icon-wrong\"></uui-icon>\r\n                      </button>\r\n                    </span>\r\n                  `\r\n                )\r\n              : html`<p class=\"no-tags\">No tags yet. Add some tags to organize your notes.</p>`}\r\n          </div>\r\n        </div>\r\n      </uui-box>\r\n\r\n      <uui-box headline=\"Information\" class=\"info-box\">\r\n        <div class=\"info-grid\">\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">Created</span>\r\n            <span class=\"info-value\">${this.#formatDate(this._createdDate)}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">Modified</span>\r\n            <span class=\"info-value\">${this.#formatDate(this._modifiedDate)}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">Created by</span>\r\n            <span class=\"info-value\">${this._createdBy || \"-\"}</span>\r\n          </div>\r\n          <div class=\"info-item\">\r\n            <span class=\"info-label\">Modified by</span>\r\n            <span class=\"info-value\">${this._modifiedBy || \"-\"}</span>\r\n          </div>\r\n        </div>\r\n      </uui-box>\r\n    `;\r\n  }\r\n\r\n  static override readonly styles = [\r\n    css`\r\n      :host {\r\n        display: block;\r\n        padding: var(--uui-size-layout-1);\r\n      }\r\n\r\n      uui-box {\r\n        margin-bottom: var(--uui-size-space-5);\r\n      }\r\n\r\n      .tags-section {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: var(--uui-size-space-4);\r\n      }\r\n\r\n      .tag-input {\r\n        display: flex;\r\n        gap: var(--uui-size-space-3);\r\n      }\r\n\r\n      .tag-input uui-input {\r\n        flex: 1;\r\n        max-width: 300px;\r\n      }\r\n\r\n      .tags-list {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n        gap: var(--uui-size-space-2);\r\n      }\r\n\r\n      .tag {\r\n        display: inline-flex;\r\n        align-items: center;\r\n        gap: var(--uui-size-space-2);\r\n        padding: var(--uui-size-space-1) var(--uui-size-space-3);\r\n        background: var(--uui-color-surface-alt);\r\n        border: 1px solid var(--uui-color-border);\r\n        border-radius: var(--uui-border-radius);\r\n        font-size: var(--uui-type-small-size);\r\n        color: var(--uui-color-text);\r\n      }\r\n\r\n      .tag-remove {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        padding: 0;\r\n        border: none;\r\n        background: none;\r\n        cursor: pointer;\r\n        color: var(--uui-color-text-alt);\r\n        transition: color 0.1s ease;\r\n      }\r\n\r\n      .tag-remove:hover {\r\n        color: var(--uui-color-danger);\r\n      }\r\n\r\n      .tag-remove uui-icon {\r\n        font-size: 12px;\r\n      }\r\n\r\n      .no-tags {\r\n        color: var(--uui-color-text-alt);\r\n        font-style: italic;\r\n        margin: 0;\r\n      }\r\n\r\n      .info-box {\r\n        margin-top: var(--uui-size-space-5);\r\n      }\r\n\r\n      .info-grid {\r\n        display: grid;\r\n        grid-template-columns: repeat(2, 1fr);\r\n        gap: var(--uui-size-space-4);\r\n      }\r\n\r\n      .info-item {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: var(--uui-size-space-1);\r\n      }\r\n\r\n      .info-label {\r\n        font-size: var(--uui-type-small-size);\r\n        color: var(--uui-color-text-alt);\r\n        text-transform: uppercase;\r\n      }\r\n\r\n      .info-value {\r\n        color: var(--uui-color-text);\r\n      }\r\n    `,\r\n  ];\r\n}\r\n\r\nexport default NoteSettingsViewElement;\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"notes-note-settings-view\": NoteSettingsViewElement;\r\n  }\r\n}\r\n"],"names":["_workspaceContext","_NoteSettingsViewElement_instances","observeData_fn","formatDate_fn","handleNewTagInput_fn","handleAddTag_fn","handleRemoveTag_fn","handleKeyPress_fn","NoteSettingsViewElement","UmbLitElement","__privateAdd","NOTE_WORKSPACE_CONTEXT","instance","__privateSet","__privateMethod","html","tag","__privateGet","tags","date","user","dateString","target","_a","css","__decorateClass","state","customElement","NoteSettingsViewElement_default"],"mappings":"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"}