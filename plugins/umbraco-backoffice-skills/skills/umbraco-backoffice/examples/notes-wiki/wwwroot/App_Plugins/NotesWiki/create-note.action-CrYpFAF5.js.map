{"version":3,"file":"create-note.action-CrYpFAF5.js","sources":["../../../Client/src/entity-actions/create-note.action.ts"],"sourcesContent":["/**\r\n * @fileoverview Create Note Entity Action\r\n *\r\n * Entity action that appears in the tree context menu to create new notes.\r\n * When executed, it navigates to the note workspace in create mode.\r\n *\r\n * **Entity Actions Overview:**\r\n *\r\n * Entity actions are context menu items that appear when right-clicking\r\n * tree items. They're registered via manifests with `forEntityTypes`\r\n * determining which entity types show the action.\r\n *\r\n * **Action Flow:**\r\n *\r\n * ```\r\n * User right-clicks tree item\r\n *         │\r\n *         └─── Context menu appears with matching entity actions\r\n *                    │\r\n *                    └─── User clicks \"Create Note\"\r\n *                              │\r\n *                              └─── execute() called\r\n *                                        │\r\n *                                        └─── Navigate to create workspace URL\r\n * ```\r\n *\r\n * **Navigation Pattern:**\r\n *\r\n * Instead of opening a modal, this action navigates to the workspace URL.\r\n * The workspace handles the create flow, including form display and saving.\r\n * This is the standard Umbraco pattern for content creation.\r\n *\r\n * Skills demonstrated: umbraco-entity-actions, umbraco-routing\r\n */\r\n\r\nimport { UMB_CREATE_NOTE_WORKSPACE_PATH_PATTERN } from \"../workspace/paths.js\";\r\nimport { UmbEntityActionBase } from \"@umbraco-cms/backoffice/entity-action\";\r\n\r\n/**\r\n * Entity action for creating new notes.\r\n *\r\n * Extends `UmbEntityActionBase` which provides:\r\n * - `this.args` - Contains entityType and unique of the clicked item\r\n * - Access to host controller for context consumption\r\n *\r\n * The generic parameter `<never>` indicates this action doesn't require\r\n * any additional repository or API class.\r\n *\r\n * @extends UmbEntityActionBase<never>\r\n *\r\n * @example\r\n * // Registered in manifests.ts:\r\n * {\r\n *   type: \"entityAction\",\r\n *   kind: \"default\",\r\n *   alias: \"Notes.EntityAction.CreateNote\",\r\n *   api: () => import(\"./create-note.action.js\"),\r\n *   forEntityTypes: [NOTES_ROOT_ENTITY_TYPE, NOTES_FOLDER_ENTITY_TYPE],\r\n *   meta: { icon: \"icon-notepad\", label: \"Create Note\" },\r\n * }\r\n */\r\nexport class CreateNoteEntityAction extends UmbEntityActionBase<never> {\r\n  /**\r\n   * Executes the create note action.\r\n   *\r\n   * Generates the workspace URL for creating a new note under the clicked\r\n   * parent and navigates to it using `history.pushState`.\r\n   *\r\n   * **URL Pattern:**\r\n   * `/section/notes/workspace/notes-note/create/parent/{parentEntityType}/{parentUnique}`\r\n   *\r\n   * The workspace route parses these parameters to set up the scaffold\r\n   * with the correct parent reference.\r\n   *\r\n   * @override\r\n   */\r\n  override async execute() {\r\n    // Generate the create workspace URL with parent info\r\n    const createPath = UMB_CREATE_NOTE_WORKSPACE_PATH_PATTERN.generateAbsolute({\r\n      parentEntityType: this.args.entityType,\r\n      parentUnique: this.args.unique ?? \"null\",\r\n    });\r\n\r\n    // Navigate to the workspace (SPA navigation)\r\n    history.pushState({}, \"\", createPath);\r\n  }\r\n}\r\n\r\n/**\r\n * Default export for Umbraco's extension loader.\r\n *\r\n * When the manifest specifies `api: () => import(\"./create-note.action.js\")`,\r\n * Umbraco looks for the default export to instantiate the action.\r\n */\r\nexport default CreateNoteEntityAction;\r\n"],"names":["CreateNoteEntityAction","UmbEntityActionBase","createPath","UMB_CREATE_NOTE_WORKSPACE_PATH_PATTERN"],"mappings":";;AA6DO,MAAMA,UAA+BC,EAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAerE,MAAe,UAAU;AAEvB,UAAMC,IAAaC,EAAuC,iBAAiB;AAAA,MACzE,kBAAkB,KAAK,KAAK;AAAA,MAC5B,cAAc,KAAK,KAAK,UAAU;AAAA,IAAA,CACnC;AAGD,YAAQ,UAAU,IAAI,IAAID,CAAU;AAAA,EACtC;AACF;"}