{"version":3,"file":"ourtree.repository-CK-xG7UB.js","sources":["../../../Client/src/api/sdk.gen.ts","../../../Client/src/settingsTree/ourtree.data-source.ts","../../../Client/src/settingsTree/ourtree.repository.ts"],"sourcesContent":["// This file is auto-generated by @hey-api/openapi-ts\n\nimport type { Options as ClientOptions, TDataShape, Client } from './client';\nimport type { GetAncestorsData, GetAncestorsResponse, GetChildrenData, GetChildrenResponse, PingData, PingResponse, GetRootData, GetRootResponse } from './types.gen';\nimport { client as _heyApiClient } from './client.gen';\n\nexport type Options<TData extends TDataShape = TDataShape, ThrowOnError extends boolean = boolean> = ClientOptions<TData, ThrowOnError> & {\n    /**\n     * You can provide a client instance returned by `createClient()` instead of\n     * individual options. This might be also useful if you want to implement a\n     * custom client.\n     */\n    client?: Client;\n    /**\n     * You can pass arbitrary values through the `meta` object. This can be\n     * used to access values that aren't defined as part of the SDK function.\n     */\n    meta?: Record<string, unknown>;\n};\n\nexport class UmbTreeClientService {\n    public static getAncestors<ThrowOnError extends boolean = true>(options?: Options<GetAncestorsData, ThrowOnError>) {\n        return (options?.client ?? _heyApiClient).get<GetAncestorsResponse, unknown, ThrowOnError>({\n            security: [\n                {\n                    scheme: 'bearer',\n                    type: 'http'\n                }\n            ],\n            url: '/umbraco/umbtreeclient/api/v1/Ancestors',\n            ...options\n        });\n    }\n    \n    public static getChildren<ThrowOnError extends boolean = true>(options?: Options<GetChildrenData, ThrowOnError>) {\n        return (options?.client ?? _heyApiClient).get<GetChildrenResponse, unknown, ThrowOnError>({\n            security: [\n                {\n                    scheme: 'bearer',\n                    type: 'http'\n                }\n            ],\n            url: '/umbraco/umbtreeclient/api/v1/Children',\n            ...options\n        });\n    }\n    \n    public static ping<ThrowOnError extends boolean = true>(options?: Options<PingData, ThrowOnError>) {\n        return (options?.client ?? _heyApiClient).get<PingResponse, unknown, ThrowOnError>({\n            security: [\n                {\n                    scheme: 'bearer',\n                    type: 'http'\n                }\n            ],\n            url: '/umbraco/umbtreeclient/api/v1/ping',\n            ...options\n        });\n    }\n    \n    public static getRoot<ThrowOnError extends boolean = true>(options?: Options<GetRootData, ThrowOnError>) {\n        return (options?.client ?? _heyApiClient).get<GetRootResponse, unknown, ThrowOnError>({\n            security: [\n                {\n                    scheme: 'bearer',\n                    type: 'http'\n                }\n            ],\n            url: '/umbraco/umbtreeclient/api/v1/root',\n            ...options\n        });\n    }\n    \n}","import type { UmbControllerHost } from \"@umbraco-cms/backoffice/controller-api\";\nimport type {\n  UmbTreeAncestorsOfRequestArgs,\n  UmbTreeChildrenOfRequestArgs,\n  UmbTreeRootItemsRequestArgs,\n} from \"@umbraco-cms/backoffice/tree\";\nimport { UmbTreeServerDataSourceBase } from \"@umbraco-cms/backoffice/tree\";\nimport type { OurTreeItemResponseModel } from \"../api/index.js\";\nimport { UmbTreeClientService } from \"../api/index.js\";\nimport {\n  OUR_TREE_ITEM_ENTITY_TYPE,\n  OUR_TREE_ROOT_ENTITY_TYPE,\n  type OurTreeItemModel,\n} from \"./types.js\";\n\nexport class OurTreeDataSource extends UmbTreeServerDataSourceBase<OurTreeItemResponseModel, OurTreeItemModel> {\n  constructor(host: UmbControllerHost) {\n    super(host, {\n      getRootItems,\n      getChildrenOf,\n      getAncestorsOf,\n      mapper,\n    });\n  }\n}\n\nconst getAncestorsOf = async (args: UmbTreeAncestorsOfRequestArgs) => {\n  return await UmbTreeClientService.getAncestors({\n    query: { id: args.treeItem.unique },\n  });\n};\n\nconst getRootItems = async (args: UmbTreeRootItemsRequestArgs) =>\n  await UmbTreeClientService.getRoot({\n    query: { skip: args.skip, take: args.take },\n  });\n\nconst getChildrenOf = async (args: UmbTreeChildrenOfRequestArgs) => {\n  if (args.parent?.unique === null) {\n    return await getRootItems(args);\n  } else {\n    return await UmbTreeClientService.getChildren({\n      query: { parent: args.parent.unique },\n    });\n  }\n};\n\nconst mapper = (item: OurTreeItemResponseModel): OurTreeItemModel => {\n  return {\n    unique: item.id ?? \"\",\n    parent: { unique: \"\", entityType: OUR_TREE_ROOT_ENTITY_TYPE },\n    name: item.name ?? \"unknown\",\n    entityType: OUR_TREE_ITEM_ENTITY_TYPE,\n    hasChildren: item.hasChildren,\n    isFolder: false,\n    icon: item.icon ?? \"icon-bug\",\n  };\n};\n","import type { UmbControllerHost } from \"@umbraco-cms/backoffice/controller-api\";\nimport type { UmbApi } from \"@umbraco-cms/backoffice/extension-api\";\nimport { UmbTreeRepositoryBase } from \"@umbraco-cms/backoffice/tree\";\nimport { OUR_TREE_STORE_CONTEXT } from \"./ourtree.store.js\";\nimport {\n  OUR_TREE_ROOT_ENTITY_TYPE,\n  type OurTreeItemModel,\n  type OurTreeRootModel,\n} from \"./types.js\";\nimport { OurTreeDataSource } from \"./ourtree.data-source.js\";\n\nexport class OurTreeRepository\n  extends UmbTreeRepositoryBase<OurTreeItemModel, OurTreeRootModel>\n  implements UmbApi\n{\n  constructor(host: UmbControllerHost) {\n    super(host, OurTreeDataSource, OUR_TREE_STORE_CONTEXT);\n  }\n\n  async requestTreeRoot() {\n    const data: OurTreeRootModel = {\n      unique: null,\n      entityType: OUR_TREE_ROOT_ENTITY_TYPE,\n      name: \"Our Tree Root\",\n      icon: \"icon-star\",\n      hasChildren: true,\n      isFolder: true,\n    };\n\n    return { data };\n  }\n}\n\nexport { OurTreeRepository as api };\n"],"names":["UmbTreeClientService","options","_heyApiClient","OurTreeDataSource","UmbTreeServerDataSourceBase","host","getRootItems","getChildrenOf","getAncestorsOf","mapper","args","_a","item","OUR_TREE_ROOT_ENTITY_TYPE","OUR_TREE_ITEM_ENTITY_TYPE","OurTreeRepository","UmbTreeRepositoryBase","OUR_TREE_STORE_CONTEXT"],"mappings":";;;;AAoBO,MAAMA,EAAqB;AAAA,EAC9B,OAAc,aAAkDC,GAAmD;AAC/G,aAAQA,KAAA,gBAAAA,EAAS,WAAUC,GAAe,IAAiD;AAAA,MACvF,UAAU;AAAA,QACN;AAAA,UACI,QAAQ;AAAA,UACR,MAAM;AAAA,QAAA;AAAA,MACV;AAAA,MAEJ,KAAK;AAAA,MACL,GAAGD;AAAA,IAAA,CACN;AAAA,EAAA;AAAA,EAGL,OAAc,YAAiDA,GAAkD;AAC7G,aAAQA,KAAA,gBAAAA,EAAS,WAAUC,GAAe,IAAgD;AAAA,MACtF,UAAU;AAAA,QACN;AAAA,UACI,QAAQ;AAAA,UACR,MAAM;AAAA,QAAA;AAAA,MACV;AAAA,MAEJ,KAAK;AAAA,MACL,GAAGD;AAAA,IAAA,CACN;AAAA,EAAA;AAAA,EAGL,OAAc,KAA0CA,GAA2C;AAC/F,aAAQA,KAAA,gBAAAA,EAAS,WAAUC,GAAe,IAAyC;AAAA,MAC/E,UAAU;AAAA,QACN;AAAA,UACI,QAAQ;AAAA,UACR,MAAM;AAAA,QAAA;AAAA,MACV;AAAA,MAEJ,KAAK;AAAA,MACL,GAAGD;AAAA,IAAA,CACN;AAAA,EAAA;AAAA,EAGL,OAAc,QAA6CA,GAA8C;AACrG,aAAQA,KAAA,gBAAAA,EAAS,WAAUC,GAAe,IAA4C;AAAA,MAClF,UAAU;AAAA,QACN;AAAA,UACI,QAAQ;AAAA,UACR,MAAM;AAAA,QAAA;AAAA,MACV;AAAA,MAEJ,KAAK;AAAA,MACL,GAAGD;AAAA,IAAA,CACN;AAAA,EAAA;AAGT;AC1DO,MAAME,UAA0BC,EAAwE;AAAA,EAC7G,YAAYC,GAAyB;AACnC,UAAMA,GAAM;AAAA,MACV,cAAAC;AAAA,MACA,eAAAC;AAAA,MACA,gBAAAC;AAAA,MACA,QAAAC;AAAA,IAAA,CACD;AAAA,EAAA;AAEL;AAEA,MAAMD,IAAiB,OAAOE,MACrB,MAAMV,EAAqB,aAAa;AAAA,EAC7C,OAAO,EAAE,IAAIU,EAAK,SAAS,OAAA;AAAO,CACnC,GAGGJ,IAAe,OAAOI,MAC1B,MAAMV,EAAqB,QAAQ;AAAA,EACjC,OAAO,EAAE,MAAMU,EAAK,MAAM,MAAMA,EAAK,KAAA;AACvC,CAAC,GAEGH,IAAgB,OAAOG,MAAuC;;AAClE,WAAIC,IAAAD,EAAK,WAAL,gBAAAC,EAAa,YAAW,OACnB,MAAML,EAAaI,CAAI,IAEvB,MAAMV,EAAqB,YAAY;AAAA,IAC5C,OAAO,EAAE,QAAQU,EAAK,OAAO,OAAA;AAAA,EAAO,CACrC;AAEL,GAEMD,IAAS,CAACG,OACP;AAAA,EACL,QAAQA,EAAK,MAAM;AAAA,EACnB,QAAQ,EAAE,QAAQ,IAAI,YAAYC,EAAA;AAAA,EAClC,MAAMD,EAAK,QAAQ;AAAA,EACnB,YAAYE;AAAA,EACZ,aAAaF,EAAK;AAAA,EAClB,UAAU;AAAA,EACV,MAAMA,EAAK,QAAQ;AAAA;AC5ChB,MAAMG,UACHC,EAEV;AAAA,EACE,YAAYX,GAAyB;AACnC,UAAMA,GAAMF,GAAmBc,CAAsB;AAAA,EAAA;AAAA,EAGvD,MAAM,kBAAkB;AAUtB,WAAO,EAAE,MATsB;AAAA,MAC7B,QAAQ;AAAA,MACR,YAAYJ;AAAA,MACZ,MAAM;AAAA,MACN,MAAM;AAAA,MACN,aAAa;AAAA,MACb,UAAU;AAAA,IAAA,EAGH;AAAA,EAAK;AAElB;"}