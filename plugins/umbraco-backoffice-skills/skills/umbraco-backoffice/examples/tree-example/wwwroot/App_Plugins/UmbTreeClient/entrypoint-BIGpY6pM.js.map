{"version":3,"file":"entrypoint-BIGpY6pM.js","sources":["../../../Client/src/entrypoints/entrypoint.ts"],"sourcesContent":["import { UMB_AUTH_CONTEXT } from \"@umbraco-cms/backoffice/auth\";\nimport type {\n  UmbEntryPointOnInit,\n  UmbEntryPointOnUnload,\n} from \"@umbraco-cms/backoffice/extension-api\";\nimport { client } from \"../api\";\n\n// load up the manifests here\nexport const onInit: UmbEntryPointOnInit = (_host, _extensionRegistry) => {\n  _host.consumeContext(UMB_AUTH_CONTEXT, (_auth) => {\n    if (!_auth) return;\n    const config = _auth.getOpenApiConfiguration();\n\n    client.setConfig({\n      baseUrl: config.base,\n      credentials: config.credentials,\n    });\n\n    client.interceptors.request.use(async (request, _options) => {\n      const token = await _auth.getLatestToken();\n      request.headers.set(\"Authorization\", `Bearer ${token}`);\n      return request;\n    });\n  });\n};\n\nexport const onUnload: UmbEntryPointOnUnload = (_host, _extensionRegistry) => {\n  console.log(\"Goodbye from my extension ðŸ‘‹\");\n};\n"],"names":["onInit","_host","_extensionRegistry","UMB_AUTH_CONTEXT","_auth","config","client","request","_options","token","onUnload"],"mappings":";;AAQO,MAAMA,IAA8B,CAACC,GAAOC,MAAuB;AACxE,EAAAD,EAAM,eAAeE,GAAkB,CAACC,MAAU;AAChD,QAAI,CAACA,EAAO;AACZ,UAAMC,IAASD,EAAM,wBAAA;AAErB,IAAAE,EAAO,UAAU;AAAA,MACf,SAASD,EAAO;AAAA,MAChB,aAAaA,EAAO;AAAA,IAAA,CACrB,GAEDC,EAAO,aAAa,QAAQ,IAAI,OAAOC,GAASC,MAAa;AAC3D,YAAMC,IAAQ,MAAML,EAAM,eAAA;AAC1B,aAAAG,EAAQ,QAAQ,IAAI,iBAAiB,UAAUE,CAAK,EAAE,GAC/CF;AAAA,IAAA,CACR;AAAA,EAAA,CACF;AACH,GAEaG,IAAkC,CAACT,GAAOC,MAAuB;AAC5E,UAAQ,IAAI,8BAA8B;AAC5C;"}