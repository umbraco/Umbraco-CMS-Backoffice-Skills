{"version":3,"file":"ourtree-workspace.context-B-6U_rcP.js","sources":["../../../Client/src/workspace/ourtree-workspace-editor.element.ts","../../../Client/src/workspace/ourtree-workspace.context.ts"],"sourcesContent":["import { OUR_TREE_WORKSPACE_CONTEXT } from \"./ourtree-workspace.context-token.js\";\r\nimport { css, html, customElement, state } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\r\n\r\n@customElement(\"our-tree-workspace-editor\")\r\nexport class OurTreeWorkspaceEditorElement extends UmbLitElement {\r\n  #workspaceContext?: typeof OUR_TREE_WORKSPACE_CONTEXT.TYPE;\r\n\r\n  @state()\r\n  private _name?: string = \"\";\r\n\r\n  @state()\r\n  private _icon?: string = \"icon-bug\";\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.consumeContext(OUR_TREE_WORKSPACE_CONTEXT, (instance) => {\r\n      this.#workspaceContext = instance;\r\n      this.#observeData();\r\n    });\r\n  }\r\n\r\n  #observeData() {\r\n    if (!this.#workspaceContext) return;\r\n\r\n    this.observe(this.#workspaceContext.name, (name) => {\r\n      this._name = name;\r\n    });\r\n\r\n    this.observe(this.#workspaceContext.icon, (icon) => {\r\n      this._icon = icon;\r\n    });\r\n  }\r\n\r\n  override render() {\r\n    return html`\r\n      <umb-workspace-editor alias=\"Our.Tree.Workspace\">\r\n        <div id=\"header\" slot=\"header\">\r\n          <uui-icon name=${this._icon ?? \"icon-bug\"}></uui-icon>\r\n          <span>${this._name}</span>\r\n        </div>\r\n      </umb-workspace-editor>\r\n    `;\r\n  }\r\n\r\n  static override readonly styles = [\r\n    css`\r\n      :host {\r\n        display: block;\r\n        width: 100%;\r\n        height: 100%;\r\n      }\r\n\r\n      #header {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: var(--uui-size-space-3);\r\n        font-size: 1.2rem;\r\n        font-weight: bold;\r\n      }\r\n\r\n      uui-icon {\r\n        font-size: 1.5rem;\r\n      }\r\n    `,\r\n  ];\r\n}\r\n\r\nexport default OurTreeWorkspaceEditorElement;\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"our-tree-workspace-editor\": OurTreeWorkspaceEditorElement;\r\n  }\r\n}\r\n","import { OUR_TREE_ITEM_ENTITY_TYPE } from \"../settingsTree/types.js\";\r\nimport { OUR_TREE_WORKSPACE_CONTEXT } from \"./ourtree-workspace.context-token.js\";\r\nimport { OUR_TREE_WORKSPACE_ALIAS } from \"./manifest.js\";\r\nimport { OurTreeWorkspaceEditorElement } from \"./ourtree-workspace-editor.element.js\";\r\nimport { UmbWorkspaceRouteManager } from \"@umbraco-cms/backoffice/workspace\";\r\nimport { UmbStringState } from \"@umbraco-cms/backoffice/observable-api\";\r\nimport type { UmbControllerHost } from \"@umbraco-cms/backoffice/controller-api\";\r\nimport { UmbContextBase } from \"@umbraco-cms/backoffice/class-api\";\r\n\r\n/**\r\n * Workspace context for managing OurTree item editing.\r\n */\r\nexport class OurTreeWorkspaceContext extends UmbContextBase {\r\n  public readonly workspaceAlias = OUR_TREE_WORKSPACE_ALIAS;\r\n\r\n  #unique = new UmbStringState(undefined);\r\n  readonly unique = this.#unique.asObservable();\r\n\r\n  #name = new UmbStringState(undefined);\r\n  readonly name = this.#name.asObservable();\r\n\r\n  #icon = new UmbStringState(\"icon-bug\");\r\n  readonly icon = this.#icon.asObservable();\r\n\r\n  readonly routes = new UmbWorkspaceRouteManager(this);\r\n\r\n  constructor(host: UmbControllerHost) {\r\n    super(host, OUR_TREE_WORKSPACE_CONTEXT);\r\n\r\n    this.routes.setRoutes([\r\n      {\r\n        path: \"edit/:unique\",\r\n        component: OurTreeWorkspaceEditorElement,\r\n        setup: (_component, info) => {\r\n          const unique = info.match.params.unique;\r\n          this.load(unique);\r\n        },\r\n      },\r\n    ]);\r\n  }\r\n\r\n  async load(unique: string) {\r\n    this.#unique.setValue(unique);\r\n    // For this example, we just display the unique ID\r\n    // A real implementation would load from a detail repository\r\n    this.#name.setValue(`Tree Item ${unique}`);\r\n  }\r\n\r\n  getUnique() {\r\n    return this.#unique.getValue();\r\n  }\r\n\r\n  getEntityType() {\r\n    return OUR_TREE_ITEM_ENTITY_TYPE;\r\n  }\r\n\r\n  override destroy() {\r\n    this.#unique.destroy();\r\n    this.#name.destroy();\r\n    this.#icon.destroy();\r\n    super.destroy();\r\n  }\r\n}\r\n\r\nexport { OurTreeWorkspaceContext as api };\r\n"],"names":["_workspaceContext","_OurTreeWorkspaceEditorElement_instances","observeData_fn","OurTreeWorkspaceEditorElement","UmbLitElement","__privateAdd","OUR_TREE_WORKSPACE_CONTEXT","instance","__privateSet","__privateMethod","html","__privateGet","name","icon","css","__decorateClass","state","customElement","OurTreeWorkspaceContext","UmbContextBase","host","_unique","_name","_icon","OUR_TREE_WORKSPACE_ALIAS","UmbStringState","UmbWorkspaceRouteManager","_component","info","unique","OUR_TREE_ITEM_ENTITY_TYPE"],"mappings":";;;;;;;;;;;;;;;;;;wXAAAA,GAAAC,GAAAC;AAKO,IAAMC,IAAN,cAA4CC,EAAc;AAAA,EAS/D,cAAc;AACZ,UAAA,GAVGC,EAAA,MAAAJ,CAAA,GACLI,EAAA,MAAAL,CAAA,GAGA,KAAQ,QAAiB,IAGzB,KAAQ,QAAiB,YAKvB,KAAK,eAAeM,GAA4B,CAACC,MAAa;AAC5D,MAAAC,EAAA,MAAKR,GAAoBO,CAAA,GACzBE,EAAA,MAAKR,GAAAC,CAAA,EAAL,KAAA,IAAA;AAAA,IAAA,CACD;AAAA,EAAA;AAAA,EAeM,SAAS;AAChB,WAAOQ;AAAA;AAAA;AAAA,2BAGgB,KAAK,SAAS,UAAU;AAAA,kBACjC,KAAK,KAAK;AAAA;AAAA;AAAA;AAAA,EAAA;AA2B5B;AA7DEV,IAAA,oBAAA,QAAA;AADKC,IAAA,oBAAA,QAAA;AAkBLC,IAAY,WAAG;AACb,EAAKS,QAAKX,CAAA,MAEV,KAAK,QAAQW,EAAA,MAAKX,CAAA,EAAkB,MAAM,CAACY,MAAS;AAClD,SAAK,QAAQA;AAAA,EAAA,CACd,GAED,KAAK,QAAQD,EAAA,MAAKX,CAAA,EAAkB,MAAM,CAACa,MAAS;AAClD,SAAK,QAAQA;AAAA,EAAA,CACd;AACH;AA5BWV,EAyCc,SAAS;AAAA,EAChCW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBF;AAzDQC,EAAA;AAAA,EADPC,EAAA;AAAM,GAHIb,EAIH,WAAA,SAAA,CAAA;AAGAY,EAAA;AAAA,EADPC,EAAA;AAAM,GANIb,EAOH,WAAA,SAAA,CAAA;AAPGA,IAANY,EAAA;AAAA,EADNE,EAAc,2BAA2B;AAAA,GAC7Bd,CAAA;;ACON,MAAMe,UAAgCC,EAAe;AAAA,EAc1D,YAAYC,GAAyB;AACnC,UAAMA,GAAMd,CAA0B;AAZxC,IAAAD,EAAA,MAAAgB;AAGA,IAAAhB,EAAA,MAAAiB;AAGA,IAAAjB,EAAA,MAAAkB;AARA,SAAgB,iBAAiBC,GAEjChB,EAAA,MAAAa,GAAU,IAAII,EAAe,MAAS,IACtC,KAAS,SAASd,EAAA,MAAKU,GAAQ,aAAA,GAE/Bb,EAAA,MAAAc,GAAQ,IAAIG,EAAe,MAAS,IACpC,KAAS,OAAOd,EAAA,MAAKW,GAAM,aAAA,GAE3Bd,EAAA,MAAAe,GAAQ,IAAIE,EAAe,UAAU,IACrC,KAAS,OAAOd,EAAA,MAAKY,GAAM,aAAA,GAE3B,KAAS,SAAS,IAAIG,EAAyB,IAAI,GAKjD,KAAK,OAAO,UAAU;AAAA,MACpB;AAAA,QACE,MAAM;AAAA,QACN,WAAWvB;AAAA,QACX,OAAO,CAACwB,GAAYC,MAAS;AAC3B,gBAAMC,IAASD,EAAK,MAAM,OAAO;AACjC,eAAK,KAAKC,CAAM;AAAA,QAAA;AAAA,MAClB;AAAA,IACF,CACD;AAAA,EAAA;AAAA,EAGH,MAAM,KAAKA,GAAgB;AACzB,IAAAlB,EAAA,MAAKU,GAAQ,SAASQ,CAAM,GAG5BlB,EAAA,MAAKW,GAAM,SAAS,aAAaO,CAAM,EAAE;AAAA,EAAA;AAAA,EAG3C,YAAY;AACV,WAAOlB,EAAA,MAAKU,GAAQ,SAAA;AAAA,EAAS;AAAA,EAG/B,gBAAgB;AACd,WAAOS;AAAA,EAAA;AAAA,EAGA,UAAU;AACjB,IAAAnB,EAAA,MAAKU,GAAQ,QAAA,GACbV,EAAA,MAAKW,GAAM,QAAA,GACXX,EAAA,MAAKY,GAAM,QAAA,GACX,MAAM,QAAA;AAAA,EAAQ;AAElB;AA/CEF,IAAA,eAGAC,IAAA,eAGAC,IAAA;"}