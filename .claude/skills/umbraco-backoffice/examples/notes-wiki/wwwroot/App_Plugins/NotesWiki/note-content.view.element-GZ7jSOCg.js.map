{"version":3,"file":"note-content.view.element-GZ7jSOCg.js","sources":["../../../Client/src/workspace/note/views/note-content.view.element.ts"],"sourcesContent":["/**\r\n * @fileoverview Note Content View Element\r\n *\r\n * The primary editing interface for note content, displayed as a tab in the\r\n * note workspace. Users edit the title and markdown content here.\r\n *\r\n * **What is a Workspace View?**\r\n *\r\n * Workspace views are tabs within a workspace that show different aspects\r\n * of the content being edited:\r\n *\r\n * ```\r\n * ┌──────────────────────────────────────────────────────┐\r\n * │  Note Workspace Header                    [Save]     │\r\n * ├──────────┬───────────┬───────────────────────────────┤\r\n * │ Content  │ Settings  │                               │\r\n * ├──────────┴───────────┴───────────────────────────────┤\r\n * │                                                      │\r\n * │   Title: [____________________]                      │\r\n * │                                                      │\r\n * │   Content:                                           │\r\n * │   [                                                ] │\r\n * │   [                                                ] │\r\n * │   [                                                ] │\r\n * │                                                      │\r\n * └──────────────────────────────────────────────────────┘\r\n * ```\r\n *\r\n * **Data Flow:**\r\n *\r\n * ```\r\n * Workspace Context (state)\r\n *         │\r\n *         └─── observe() ───> View Component (display)\r\n *                                    │\r\n *                                    └─── @input ───> setTitle()/setContent()\r\n *                                                          │\r\n *                                                          └─── Context state updated\r\n * ```\r\n *\r\n * The view subscribes to context observables for display, and calls\r\n * context setters when the user makes changes. The context handles\r\n * all state management and API communication.\r\n *\r\n * Skills demonstrated: umbraco-workspace, umbraco-umbraco-element, umbraco-context-api\r\n */\r\n\r\nimport { NOTE_WORKSPACE_CONTEXT } from \"../note-workspace.context-token.js\";\r\nimport { css, html, customElement, state } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\r\n\r\n/**\r\n * Content editing view for the note workspace.\r\n *\r\n * Provides form fields for editing:\r\n * - Title (single-line input)\r\n * - Content (multi-line textarea for markdown)\r\n *\r\n * @element notes-note-content-view\r\n * @extends UmbLitElement\r\n *\r\n * @example\r\n * // Registered as a workspace view in workspace/manifests.ts:\r\n * {\r\n *   type: \"workspaceView\",\r\n *   alias: \"Notes.WorkspaceView.Note.Content\",\r\n *   element: () => import(\"./views/note-content.view.element.js\"),\r\n *   conditions: [{ alias: \"Umb.Condition.WorkspaceAlias\", match: \"Notes.Workspace.Note\" }],\r\n * }\r\n */\r\n@customElement(\"notes-note-content-view\")\r\nexport class NoteContentViewElement extends UmbLitElement {\r\n  /**\r\n   * Reference to the workspace context.\r\n   * Populated via `consumeContext` in the constructor.\r\n   * @private\r\n   */\r\n  #workspaceContext?: typeof NOTE_WORKSPACE_CONTEXT.TYPE;\r\n\r\n  /**\r\n   * Local state for the title input.\r\n   * Synchronized with context via `observe()`.\r\n   * @private\r\n   */\r\n  @state()\r\n  private _title = \"\";\r\n\r\n  /**\r\n   * Local state for the content textarea.\r\n   * Synchronized with context via `observe()`.\r\n   * @private\r\n   */\r\n  @state()\r\n  private _content = \"\";\r\n\r\n  /**\r\n   * Sets up context consumption on construction.\r\n   *\r\n   * Uses `consumeContext` to get the workspace context, then\r\n   * sets up observers for reactive data binding.\r\n   */\r\n  constructor() {\r\n    super();\r\n\r\n    this.consumeContext(NOTE_WORKSPACE_CONTEXT, (instance) => {\r\n      this.#workspaceContext = instance;\r\n      this.#observeData();\r\n    });\r\n  }\r\n\r\n  // ===========================================================================\r\n  // DATA OBSERVATION\r\n  // ===========================================================================\r\n\r\n  /**\r\n   * Sets up observers for context data.\r\n   *\r\n   * The `observe()` helper (from UmbLitElement) automatically:\r\n   * - Subscribes to the RxJS observable\r\n   * - Unsubscribes when component is destroyed\r\n   * - Triggers re-render when data changes\r\n   *\r\n   * @private\r\n   */\r\n  #observeData() {\r\n    if (!this.#workspaceContext) return;\r\n\r\n    // Subscribe to title changes from context\r\n    this.observe(this.#workspaceContext.title, (title) => {\r\n      this._title = title || \"\";\r\n    });\r\n\r\n    // Subscribe to content changes from context\r\n    this.observe(this.#workspaceContext.content, (content) => {\r\n      this._content = content || \"\";\r\n    });\r\n  }\r\n\r\n  // ===========================================================================\r\n  // EVENT HANDLERS\r\n  // ===========================================================================\r\n\r\n  /**\r\n   * Handles title input changes.\r\n   * Updates the workspace context with the new title.\r\n   *\r\n   * @param {InputEvent} e - The input event\r\n   * @private\r\n   */\r\n  #handleTitleChange(e: InputEvent) {\r\n    const target = e.target as HTMLInputElement;\r\n    this.#workspaceContext?.setTitle(target.value);\r\n  }\r\n\r\n  /**\r\n   * Handles content textarea changes.\r\n   * Updates the workspace context with the new content.\r\n   *\r\n   * @param {InputEvent} e - The input event\r\n   * @private\r\n   */\r\n  #handleContentChange(e: InputEvent) {\r\n    const target = e.target as HTMLTextAreaElement;\r\n    this.#workspaceContext?.setContent(target.value);\r\n  }\r\n\r\n  override render() {\r\n    return html`\r\n      <uui-box>\r\n        <div class=\"form-group\">\r\n          <label for=\"title\">Title</label>\r\n          <uui-input\r\n            id=\"title\"\r\n            placeholder=\"Enter note title...\"\r\n            .value=${this._title}\r\n            @input=${this.#handleTitleChange}\r\n          ></uui-input>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label for=\"content\">Content</label>\r\n          <uui-textarea\r\n            id=\"content\"\r\n            placeholder=\"Write your note content here...\"\r\n            .value=${this._content}\r\n            @input=${this.#handleContentChange}\r\n            rows=\"20\"\r\n          ></uui-textarea>\r\n        </div>\r\n      </uui-box>\r\n    `;\r\n  }\r\n\r\n  static override readonly styles = [\r\n    css`\r\n      :host {\r\n        display: block;\r\n        padding: var(--uui-size-layout-1);\r\n      }\r\n\r\n      .form-group {\r\n        margin-bottom: var(--uui-size-space-5);\r\n      }\r\n\r\n      .form-group:last-child {\r\n        margin-bottom: 0;\r\n      }\r\n\r\n      label {\r\n        display: block;\r\n        margin-bottom: var(--uui-size-space-2);\r\n        font-weight: 600;\r\n        color: var(--uui-color-text);\r\n      }\r\n\r\n      uui-input {\r\n        width: 100%;\r\n      }\r\n\r\n      uui-textarea {\r\n        width: 100%;\r\n        min-height: 400px;\r\n        font-family: var(--uui-font-family);\r\n      }\r\n    `,\r\n  ];\r\n}\r\n\r\nexport default NoteContentViewElement;\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"notes-note-content-view\": NoteContentViewElement;\r\n  }\r\n}\r\n"],"names":["_workspaceContext","_NoteContentViewElement_instances","observeData_fn","handleTitleChange_fn","handleContentChange_fn","NoteContentViewElement","UmbLitElement","__privateAdd","NOTE_WORKSPACE_CONTEXT","instance","__privateSet","__privateMethod","html","__privateGet","title","content","e","target","_a","css","__decorateClass","state","customElement","NoteContentViewElement_default"],"mappings":";;;;;;;;;wXAAAA,GAAAC,GAAAC,GAAAC,GAAAC;AAuEO,IAAMC,IAAN,cAAqCC,EAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA8BxD,cAAc;AACZ,UAAA,GA/BGC,EAAA,MAAAN,CAAA,GAMLM,EAAA,MAAAP,CAAA,GAQA,KAAQ,SAAS,IAQjB,KAAQ,WAAW,IAWjB,KAAK,eAAeQ,GAAwB,CAACC,MAAa;AACxD,MAAAC,EAAA,MAAKV,GAAoBS,CAAA,GACzBE,EAAA,MAAKV,GAAAC,CAAA,EAAL,KAAA,IAAA;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EA0DS,SAAS;AAChB,WAAOU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAOU,KAAK,MAAM;AAAA,qBACXD,QAAKV,GAAAE,CAAA,CAAkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBASvB,KAAK,QAAQ;AAAA,qBACbQ,QAAKV,GAAAG,CAAA,CAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAM5C;AAmCF;AArJEJ,IAAA,oBAAA,QAAA;AANKC,IAAA,oBAAA,QAAA;AAqDLC,IAAY,WAAG;AACb,EAAKW,QAAKb,CAAA,MAGV,KAAK,QAAQa,EAAA,MAAKb,CAAA,EAAkB,OAAO,CAACc,MAAU;AACpD,SAAK,SAASA,KAAS;AAAA,EACzB,CAAC,GAGD,KAAK,QAAQD,EAAA,MAAKb,CAAA,EAAkB,SAAS,CAACe,MAAY;AACxD,SAAK,WAAWA,KAAW;AAAA,EAC7B,CAAC;AACH;AAaAZ,IAAkB,SAACa,GAAe;;AAChC,QAAMC,IAASD,EAAE;AACjB,GAAAE,IAAAL,EAAA,MAAKb,CAAA,MAAL,QAAAkB,EAAwB,SAASD,EAAO;AAC1C;AASAb,IAAoB,SAACY,GAAe;;AAClC,QAAMC,IAASD,EAAE;AACjB,GAAAE,IAAAL,EAAA,MAAKb,CAAA,MAAL,QAAAkB,EAAwB,WAAWD,EAAO;AAC5C;AA7FWZ,EA0Hc,SAAS;AAAA,EAChCc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA+BF;AA5IQC,EAAA;AAAA,EADPC,EAAA;AAAM,GAbIhB,EAcH,WAAA,UAAA,CAAA;AAQAe,EAAA;AAAA,EADPC,EAAA;AAAM,GArBIhB,EAsBH,WAAA,YAAA,CAAA;AAtBGA,IAANe,EAAA;AAAA,EADNE,EAAc,yBAAyB;AAAA,GAC3BjB,CAAA;AA6Jb,MAAAkB,IAAelB;"}