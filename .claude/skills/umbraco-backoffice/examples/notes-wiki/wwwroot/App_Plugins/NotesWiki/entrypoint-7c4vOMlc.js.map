{"version":3,"file":"entrypoint-7c4vOMlc.js","sources":["../../../Client/src/entrypoints/entrypoint.ts"],"sourcesContent":["/**\r\n * Notes Entry Point\r\n *\r\n * Runs when the Notes extension loads.\r\n * Configures the OpenAPI client with authentication from Umbraco's auth context.\r\n *\r\n * Skills used: umbraco-entry-point\r\n */\r\n\r\nimport type { UmbEntryPointOnInit, UmbEntryPointOnUnload } from \"@umbraco-cms/backoffice/extension-api\";\r\nimport { UMB_AUTH_CONTEXT } from \"@umbraco-cms/backoffice/auth\";\r\nimport { client } from \"../api/client.gen.js\";\r\n\r\nexport const onInit: UmbEntryPointOnInit = (host, _extensionRegistry) => {\r\n  console.log(\"Notes Wiki extension initialized\");\r\n\r\n  // Configure the OpenAPI client with authentication from Umbraco's auth context\r\n  // This is required for the hey-api client to send bearer tokens with requests\r\n  host.consumeContext(UMB_AUTH_CONTEXT, (authContext) => {\r\n    if (!authContext) return;\r\n\r\n    const config = authContext.getOpenApiConfiguration();\r\n\r\n    // Configure the client with auth token resolver\r\n    client.setConfig({\r\n      baseUrl: config.base,\r\n      credentials: config.credentials,\r\n      auth: config.token,\r\n    });\r\n\r\n    console.log(\"Notes Wiki API client configured with auth\");\r\n  });\r\n};\r\n\r\nexport const onUnload: UmbEntryPointOnUnload = (_host, _extensionRegistry) => {\r\n  console.log(\"Notes Wiki extension unloaded\");\r\n};\r\n"],"names":["onInit","host","_extensionRegistry","UMB_AUTH_CONTEXT","authContext","config","client","onUnload","_host"],"mappings":";;AAaO,MAAMA,IAA8B,CAACC,GAAMC,MAAuB;AACvE,UAAQ,IAAI,kCAAkC,GAI9CD,EAAK,eAAeE,GAAkB,CAACC,MAAgB;AACrD,QAAI,CAACA,EAAa;AAElB,UAAMC,IAASD,EAAY,wBAAA;AAG3B,IAAAE,EAAO,UAAU;AAAA,MACf,SAASD,EAAO;AAAA,MAChB,aAAaA,EAAO;AAAA,MACpB,MAAMA,EAAO;AAAA,IAAA,CACd,GAED,QAAQ,IAAI,4CAA4C;AAAA,EAC1D,CAAC;AACH,GAEaE,IAAkC,CAACC,GAAON,MAAuB;AAC5E,UAAQ,IAAI,+BAA+B;AAC7C;"}