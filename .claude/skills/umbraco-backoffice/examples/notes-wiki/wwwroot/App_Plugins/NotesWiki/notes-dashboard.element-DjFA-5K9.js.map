{"version":3,"file":"notes-dashboard.element-DjFA-5K9.js","sources":["../../../Client/src/dashboard/notes-dashboard.element.ts"],"sourcesContent":["/**\r\n * @fileoverview Notes Dashboard Element\r\n *\r\n * The welcome dashboard that displays when entering the Notes section.\r\n * Provides an overview of the Notes Wiki with recent notes and getting started info.\r\n *\r\n * **What is a Dashboard?**\r\n *\r\n * In Umbraco, a dashboard is a view that appears when:\r\n * - A section is first opened (no item selected)\r\n * - The user clicks a dashboard tab\r\n *\r\n * Dashboards are typically used for:\r\n * - Welcome/overview screens\r\n * - Quick access to recent items\r\n * - Search interfaces\r\n * - Statistics and reports\r\n *\r\n * **Component Architecture:**\r\n *\r\n * This component extends `UmbLitElement` which provides:\r\n * - Lit's reactive properties (`@state`, `@property`)\r\n * - Umbraco's `observe()` helper for RxJS subscriptions\r\n * - Automatic cleanup on disconnect\r\n *\r\n * **Lifecycle:**\r\n *\r\n * ```\r\n * connectedCallback() ─────> #loadRecentNotes()\r\n *                                   │\r\n *                                   └─── API call\r\n *                                          │\r\n *                                          └─── Update _recentNotes state\r\n *                                                   │\r\n *                                                   └─── render() triggered\r\n * ```\r\n *\r\n * Skills demonstrated: umbraco-dashboard, umbraco-umbraco-element, Lit components\r\n */\r\n\r\nimport { html, css, customElement, state } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbLitElement } from \"@umbraco-cms/backoffice/lit-element\";\r\nimport { NoteswikiService } from \"../api/index.js\";\r\nimport type { NoteModel } from \"../api/types.gen.js\";\r\nimport { UMB_EDIT_NOTE_WORKSPACE_PATH_PATTERN } from \"../workspace/paths.js\";\r\n\r\n/**\r\n * Welcome dashboard component for the Notes section.\r\n *\r\n * Displays:\r\n * - Welcome message explaining the Notes Wiki purpose\r\n * - List of 5 most recently modified notes\r\n * - Getting started tips for new users\r\n *\r\n * @element notes-dashboard-element\r\n * @extends UmbLitElement\r\n *\r\n * @example\r\n * // Registered in dashboard/manifests.ts:\r\n * {\r\n *   type: \"dashboard\",\r\n *   alias: \"Notes.Dashboard\",\r\n *   element: () => import(\"./notes-dashboard.element.js\"),\r\n *   conditions: [{ alias: \"Umb.Condition.SectionAlias\", match: \"Notes.Section\" }],\r\n * }\r\n */\r\n@customElement(\"notes-dashboard-element\")\r\nexport class NotesDashboardElement extends UmbLitElement {\r\n  /**\r\n   * Array of recently modified notes fetched from the API.\r\n   * Used to render the \"Recent Notes\" section.\r\n   * @private\r\n   */\r\n  @state()\r\n  private _recentNotes: NoteModel[] = [];\r\n\r\n  /**\r\n   * Loading state flag for the recent notes section.\r\n   * Shows a loader while fetching, then content or empty state.\r\n   * @private\r\n   */\r\n  @state()\r\n  private _loading = true;\r\n\r\n  // ===========================================================================\r\n  // LIFECYCLE\r\n  // ===========================================================================\r\n\r\n  /**\r\n   * Called when the element is added to the DOM.\r\n   * Triggers initial data loading for recent notes.\r\n   * @override\r\n   */\r\n  override connectedCallback() {\r\n    super.connectedCallback();\r\n    this.#loadRecentNotes();\r\n  }\r\n\r\n  // ===========================================================================\r\n  // DATA LOADING\r\n  // ===========================================================================\r\n\r\n  /**\r\n   * Fetches the 5 most recently modified notes from the API.\r\n   *\r\n   * Updates `_loading` state to show/hide the loader,\r\n   * then populates `_recentNotes` with results.\r\n   *\r\n   * @private\r\n   */\r\n  async #loadRecentNotes() {\r\n    this._loading = true;\r\n    try {\r\n      const response = await NoteswikiService.getRecentNotes({\r\n        query: { count: 5 },\r\n      });\r\n      this._recentNotes = response.data ?? [];\r\n    } catch (error) {\r\n      console.error(\"Error loading recent notes:\", error);\r\n      this._recentNotes = [];\r\n    } finally {\r\n      this._loading = false;\r\n    }\r\n  }\r\n\r\n  // ===========================================================================\r\n  // EVENT HANDLERS\r\n  // ===========================================================================\r\n\r\n  /**\r\n   * Navigates to the note workspace when a recent note is clicked.\r\n   *\r\n   * Uses `history.pushState` for SPA navigation instead of a full page load.\r\n   *\r\n   * @param {NoteModel} note - The note that was clicked\r\n   * @private\r\n   */\r\n  #handleNoteClick(note: NoteModel) {\r\n    const editPath = UMB_EDIT_NOTE_WORKSPACE_PATH_PATTERN.generateAbsolute({\r\n      unique: note.unique,\r\n    });\r\n    history.pushState({}, \"\", editPath);\r\n  }\r\n\r\n  // ===========================================================================\r\n  // HELPER METHODS\r\n  // ===========================================================================\r\n\r\n  /**\r\n   * Formats an ISO date string for display.\r\n   *\r\n   * @param {string} dateString - ISO 8601 date string\r\n   * @returns {string} Formatted date like \"Jan 15, 2024, 2:30 PM\"\r\n   * @private\r\n   */\r\n  #formatDate(dateString: string): string {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString(undefined, {\r\n      year: \"numeric\",\r\n      month: \"short\",\r\n      day: \"numeric\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n    });\r\n  }\r\n\r\n  // ===========================================================================\r\n  // RENDER METHODS\r\n  // ===========================================================================\r\n\r\n  /**\r\n   * Renders the recent notes section with loading, empty, and content states.\r\n   * @private\r\n   */\r\n  #renderRecentNotes() {\r\n    if (this._loading) {\r\n      return html`\r\n        <div class=\"loading-state\">\r\n          <uui-loader></uui-loader>\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    if (this._recentNotes.length === 0) {\r\n      return html`\r\n        <div class=\"empty-state\">\r\n          <uui-icon name=\"icon-notepad\"></uui-icon>\r\n          <p>No notes yet. Right-click in the tree to create your first note!</p>\r\n        </div>\r\n      `;\r\n    }\r\n\r\n    return html`\r\n      <div class=\"notes-list\">\r\n        ${this._recentNotes.map(\r\n          (note) => html`\r\n            <button\r\n              class=\"note-item\"\r\n              @click=${() => this.#handleNoteClick(note)}\r\n            >\r\n              <uui-icon name=\"icon-notepad\"></uui-icon>\r\n              <div class=\"note-info\">\r\n                <span class=\"note-title\">${note.title || \"Untitled\"}</span>\r\n                <span class=\"note-date\">Modified ${this.#formatDate(note.modifiedDate)}</span>\r\n              </div>\r\n              <uui-icon name=\"icon-arrow-right\" class=\"arrow\"></uui-icon>\r\n            </button>\r\n          `\r\n        )}\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  override render() {\r\n    return html`\r\n      <div class=\"dashboard\">\r\n        <uui-box headline=\"Notes Wiki\">\r\n          <div class=\"welcome-content\">\r\n            <p>\r\n              Welcome to the Notes Wiki! This is your internal knowledge base for\r\n              documentation, notes, and team information.\r\n            </p>\r\n          </div>\r\n        </uui-box>\r\n\r\n        <uui-box headline=\"Recent Notes\" class=\"recent-notes\">\r\n          ${this.#renderRecentNotes()}\r\n        </uui-box>\r\n\r\n        <uui-box headline=\"Getting Started\" class=\"getting-started\">\r\n          <ul>\r\n            <li>Use the tree on the left to browse notes and folders</li>\r\n            <li>Right-click on the tree to create new notes or folders</li>\r\n            <li>Use tags to organize your notes</li>\r\n          </ul>\r\n        </uui-box>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  static override styles = css`\r\n    :host {\r\n      display: block;\r\n      padding: var(--uui-size-layout-1);\r\n    }\r\n\r\n    .dashboard {\r\n      display: grid;\r\n      gap: var(--uui-size-layout-1);\r\n      max-width: 1200px;\r\n    }\r\n\r\n    .welcome-content p {\r\n      margin: 0;\r\n      color: var(--uui-color-text-alt);\r\n    }\r\n\r\n    .recent-notes,\r\n    .getting-started {\r\n      margin-top: var(--uui-size-space-3);\r\n    }\r\n\r\n    .loading-state {\r\n      display: flex;\r\n      justify-content: center;\r\n      padding: var(--uui-size-space-6);\r\n    }\r\n\r\n    .empty-state {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n      padding: var(--uui-size-space-6);\r\n      color: var(--uui-color-text-alt);\r\n    }\r\n\r\n    .empty-state uui-icon {\r\n      font-size: 48px;\r\n      margin-bottom: var(--uui-size-space-4);\r\n      opacity: 0.5;\r\n    }\r\n\r\n    .notes-list {\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: var(--uui-size-space-2);\r\n    }\r\n\r\n    .note-item {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: var(--uui-size-space-3);\r\n      padding: var(--uui-size-space-3) var(--uui-size-space-4);\r\n      border: 1px solid var(--uui-color-border);\r\n      border-radius: var(--uui-border-radius);\r\n      background: var(--uui-color-surface);\r\n      cursor: pointer;\r\n      text-align: left;\r\n      width: 100%;\r\n      transition: background-color 0.1s ease;\r\n    }\r\n\r\n    .note-item:hover {\r\n      background: var(--uui-color-surface-emphasis);\r\n    }\r\n\r\n    .note-item uui-icon {\r\n      font-size: 1.2rem;\r\n      color: var(--uui-color-text-alt);\r\n    }\r\n\r\n    .note-info {\r\n      flex: 1;\r\n      display: flex;\r\n      flex-direction: column;\r\n      gap: var(--uui-size-space-1);\r\n    }\r\n\r\n    .note-title {\r\n      font-weight: 600;\r\n      color: var(--uui-color-text);\r\n    }\r\n\r\n    .note-date {\r\n      font-size: var(--uui-type-small-size);\r\n      color: var(--uui-color-text-alt);\r\n    }\r\n\r\n    .note-item .arrow {\r\n      opacity: 0;\r\n      transition: opacity 0.1s ease;\r\n    }\r\n\r\n    .note-item:hover .arrow {\r\n      opacity: 1;\r\n    }\r\n\r\n    .getting-started ul {\r\n      margin: 0;\r\n      padding-left: var(--uui-size-space-6);\r\n    }\r\n\r\n    .getting-started li {\r\n      margin-bottom: var(--uui-size-space-2);\r\n    }\r\n  `;\r\n}\r\n\r\nexport default NotesDashboardElement;\r\n\r\ndeclare global {\r\n  interface HTMLElementTagNameMap {\r\n    \"notes-dashboard-element\": NotesDashboardElement;\r\n  }\r\n}\r\n"],"names":["_NotesDashboardElement_instances","loadRecentNotes_fn","handleNoteClick_fn","formatDate_fn","renderRecentNotes_fn","NotesDashboardElement","UmbLitElement","__privateAdd","__privateMethod","html","response","NoteswikiService","error","note","editPath","UMB_EDIT_NOTE_WORKSPACE_PATH_PATTERN","dateString","css","__decorateClass","state","customElement","NotesDashboardElement_default"],"mappings":"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"}